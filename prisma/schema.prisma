generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model Permissions {
  id               String             @id @default(uuid())
  description      String             @unique @db.VarChar(50)
  createAt         DateTime           @default(now())
  updatedAt        DateTime?
  usersPermissions UsersPermissions[]

  @@map("permissions")
}

model Users {
  id               String             @id @default(uuid())
  email            String             @unique @db.VarChar(255)
  createdAt         DateTime           @default(now())
  updatedAt        DateTime?
  name             String             @db.VarChar(255)
  isActive         Boolean            @default(false)
  createdBy        String?
  updatedBy        String?
  password         String             @db.VarChar(300)
  lastLogin        DateTime?
  usersPermissions UsersPermissions[]
  refreshTokenCode String?  

  @@index([id, email])
  @@map("users")
}

model UsersPermissions {
  id           String      @id @default(uuid())
  createdAt    DateTime    @default(now())
  updatedAt     DateTime?    @default(now())
  permission   Permissions @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  permissionId String
  user         Users       @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       String

  @@index([id, userId, permissionId])
  @@map("usersPermissions")
}

enum TypePermission {
  Company
  Client
}